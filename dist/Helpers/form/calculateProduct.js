"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _default=function(){for(var a,b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=0,d=0,e=":price",f=".",g=Object.keys(b),h=0;h<g.length;h++)if(a=b[g[h]],"product"==a.type){a.basePrice.includes(",")&&(f=",");var k=a.basePrice.replace(",","."),l=k.match(/-?(?:\d+(?:\.\d*)?|\.\d+)/)[0];e=k.replace(l,":price");break}for(var s,t=0;t<g.length;t++){if(s=b[g[t]],"quantity"==s.type){for(var m,n=b[s.productField],o=parseFloat(n.basePrice.replace(",",".").match(/-?(?:\d+(?:\.\d*)?|\.\d+)/)[0]),p=0;p<g.length;p++)if(m=b[g[p]],"option"==m.type&&m.productField==s.productField){var q;null!==(q=m.value)&&void 0!==q&&q.value&&(o+=parseFloat(m.value.value.split("|")[1]))}d+=parseFloat(s.value),c+=o*parseFloat(s.value)}if("shipping"==s.type){var r;if(null!==(r=s.value)&&void 0!==r&&r.value)c+=parseFloat(s.value.value.split("|")[1]);else{var u=parseFloat(s.basePrice.replace(",",".").match(/-?(?:\d+(?:\.\d*)?|\.\d+)/)[0]);c+=u}}}for(var v,w=0;w<g.length;w++)if(v=b[g[w]],"total"==v.type){var x=c.toFixed(2);0<d?","==f&&(x=x.toString().replace(".",",")):x=0,b[g[w]].value=e.replace(":price",x)}return b};exports["default"]=_default;